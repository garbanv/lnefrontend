import React, { useState,useEffect } from "react";
import Link from "next/link";
import Head from "next/head";
import { useUser, getSession, withPageAuthRequired } from "@auth0/nextjs-auth0";
import styles from "../styles/Home.module.css";
import UserListRow from "../components/UserListRow";
import AddUserModal from "../components/AddUserModal";

export default function dashboard() {
  const { user, error, isLoading } = useUser();
  const [showModal,setShowModal] = useState(false)
 
console.log("user: ", user)
 
  return (
    <>
      <Head>
        <title>La Nueva Esperanza App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <header className="border-b">
        <div className="container mx-auto py-5  grid space-between grid-cols-2">
          <img
            src="http://nuevahope.org/wp-content/uploads/2018/01/la-nueva-2.png"
            alt=""
            width={125}
          />
          <div id="head-user" className="grid place-items-end">
            <h3 className="font-black">
              {user && user["https://lanuevatest.herokuapp.com/name"]}
            </h3>
            <h6 className="">
              {user && user["https://lanuevatest.herokuapp.com/roles"]}
            </h6>
            <a
              href="/api/auth/logout"
              className={`${styles.btnIndexPage} inline-block  btn-index-page text-black px-5 py-2 rounded-md`}
            >
              Logout
            </a>
          </div>
        </div>
      </header>
      <main className="mt-5 ">
        <section id="dashboard-client-list">
          <div className="container mx-auto">
          {/*   <h3 className="font-black my-5">What you want to do today?</h3> */}
            <div className="flex mb-5">
            <Link href="/authorizedusers">
              <button className="rounded bg-gray-100 px-5 py-2 flex shadow-xl inline-block mr-1" id="myBtn">
              <svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 5.4V2.35355C16 2.15829 16.1583 2 16.3536 2C16.4473 2 16.5372 2.03725 16.6036 2.10355L19.8964 5.39645C19.9628 5.46275 20 5.55268 20 5.64645C20 5.84171 19.8417 6 19.6464 6H16.6C16.2686 6 16 5.73137 16 5.4Z" fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 10L16 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 18L16 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 14L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              {" "}
                Authorized Users
              </button>
              </Link>
              <Link href="/users">
              <button className="rounded bg-gray-100 px-5 py-2 flex shadow-xl inline-block mr-1" id="myBtn">
              <svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 5.4V2.35355C16 2.15829 16.1583 2 16.3536 2C16.4473 2 16.5372 2.03725 16.6036 2.10355L19.8964 5.39645C19.9628 5.46275 20 5.55268 20 5.64645C20 5.84171 19.8417 6 19.6464 6H16.6C16.2686 6 16 5.73137 16 5.4Z" fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 10L16 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 18L16 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 14L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              {" "}
                Users
              </button>
              </Link>
              
              <button className="rounded bg-gray-100 px-5 py-2 flex shadow-xl inline-block" id="myBtn" /* onClick={()=>setShowModal(!showModal)} */>
                <svg
                  className="mr-2"
                  width="24"
                  height="24"
                  stroke-width="1.5"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M17 10H20M23 10H20M20 10V7M20 10V13"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M1 20V19C1 15.134 4.13401 12 8 12V12C11.866 12 15 15.134 15 19V20"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M8 12C10.2091 12 12 10.2091 12 8C12 5.79086 10.2091 4 8 4C5.79086 4 4 5.79086 4 8C4 10.2091 5.79086 12 8 12Z"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>{" "}
                Add new Client
              </button>
            </div>
            {/* <div className="dashboard-client-list">
            <h3 className="font-black text-center my-5">Client list</h3>
              <div className={`${styles.dashboardClientListHeadRow} py-3 px-5`}>
                <div className="head-row font-black">
                  <p className="text-center"> User ID</p>
                </div>
                <div className="head-row font-black">
                  <p className="text-center">Name</p>
                </div>
                <div className="head-row font-black">
                  <p className="text-center">Last login</p>
                </div>
                <div className="head-row font-black">
                  <p className="text-center">Activated in</p>
                </div>
                <div className="head-row font-black">
                  <p className="text-center">Deactivated in</p>
                </div>
                <div className="head-row font-black">
                  <p className="text-center">Edit</p>
                </div>
                <div className="head-row font-black">
                  <p className="text-center">Delete</p>
                </div>
              </div>
            </div> */}
            <div className="dashboard-client-list mt-5">
              <h1 className="font-black text-center my-5">No active clients</h1>
{/*               <UserListRow /> */}
            </div>
          </div>
        </section>
      </main>

      {showModal &&<AddUserModal setShowModal={setShowModal} showModal={showModal}/>}
    </>
  );
}

export const getServerSideProps = withPageAuthRequired();
